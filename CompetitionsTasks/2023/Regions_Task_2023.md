


# КОНКУРСНОЕ ЗАДАНИЕ КОМПЕТЕНЦИИ
# «СЕТЕВОЕ И СИСТЕМНОЕ АДМИНИСТРИРОВАНИЕ»



## Структура модулей конкурсного задания (инвариант)

В случае, если в тексте задания не указано иное, все пользовательские учетные записи должны иметь пароль P@ssw0rd. 
На маршрутизаторе R0 логин/пароль по умолчанию - vyos/toor 
На межсетевых экранах FW* логин/пароль по умолчанию - root/toor 
На компьютерах с Debian 10/11 логин/пароль по умолчанию - user/P@ssw0rd и root/toor
Все проверки работы клиентских технологий (сайтов, клиентских VPN подключений и т.п.) будут выполняться из под пользователя user соответствующих клиентских машин. Сайты будут проверяться через стандартный браузер клиентской ОС (для Windows - Edge, для Linux - Firefox).
При выполнении настоящего задания всегда нужно руководствоваться правилом наименьших привилегий. 
Консольный доступ к виртуальной машине провайдера ISP для участника не предполагается. Следите за тем, чтобы виртуальная машина ISP была включена в течение всего времени выполнения задания.

### Модуль А. (Настройка технических и программных средств информационно-коммуникационных систем) 
 
ЗАДАНИЕ
1. Настройте статичные IPv4-адреса, шлюз по умолчанию и описания на интерфейсах FW* и R0 согласно схеме адресации.
2. Настройте статичные IPv4-адреса и шлюз по умолчанию на всех устройствах, где это требуется, согласно схеме адресации.
3. Настройте OSPFv2 между R0-MSK и FW-MSK 
3.1. FW-MSK должен узнавать о сетях LAN-MSK и SRV-MSK через OSPF. 
3.2. R0 должен получать маршрут по умолчанию и другие необходимые маршруты от FW-MSK через OSPF. 
3.3. Не используйте статические маршруты до этих сетей. Статические маршруты применимы только в качестве временной меры.
3.4. R0-MSK должен быть защищен от вброса маршрутов с интерфейсов смотрящих в сторону сетей LAN-MSK и SRV-MSK 
3.5. FW-MSK должен быть защищен от вброса маршрутов с интерфейса смотрящего в сторону сети DMZ-MSK.
4. Обеспечьте выход в интернет для всех устройств московского и амстердамского офисов. 
5. Настройте сервер разрешения имен
5.1. Устройства в локальных сетях должны обращаться с DNS запросами к своим FW* 
5.2. Пограничные маршрутизаторы FW* должны выполнять пересылку DNS запросов от локальных клиентов на DNS сервер по адресу 100.100.100.100.
5.3. ClientSPB и VDS должны обращаться с DNS запросами к 100.100.100.100.
6. Настройте имена устройств согласно топологии.
7. Настройте для всех устройств московского и амстердамского офисов доменные имена в зонах msk.jun39.wsr и ams.jun39.wsr соответственно.
7.1. Все устройства должны быть доступны в локальных сетях всех филиалов по именам в соответствии с топологией в доменах соответствующих филиалов. К примеру dmz-ams.ams.jun39.wsr или pc-msk.msk.jun39.wsr
7.2. В рамках каждого филиала короткие имена должны автоматически дополняться доменным именем соответствующего филиала
8. Настройте DHCP-сервер на SRV1–MSK для клиентов в сети LAN–MSK и DHCP-сервер на FW-AMS для сети LAN–AMS. DHCP-сервер должен передавать клиентам следующие опции:
8.1. Адрес хоста
8.2. Маску сети 
8.3. Адрес шлюза
8.4. Имя домена (msk.jun39.wsr и ams.jun39.wsr соответственно.)
8.5. Адрес DNS (FW*)
8.6. Адрес NTP (FW*)
8.7. Выдаваемый диапазон адресов должен иметь запас в как минимум по 10 адресов в начале и конце сети, но не более 50 суммарного запаса. 
9. Настройте DHCP Relay на маршрутизаторе R0-MSK таким образом, чтобы клиентам в сети LAN–MSK адреса выдавал сервер SRV1–MSK. 
10. Настройте синхронизацию времени
10.1. Устройства в локальных сетях должны синхронизировать свое время с FW*.
10.2. Устройства с динамическими адресами должны получать получать информацию о сервере времени от своего DHCP сервера и использовать ее для работы.
10.3. Пограничные маршрутизаторы FW*, ClientSPB и VDS должны синхронизировать свое время с NTP сервером по адресу 100.101.102.103.
10.4. Настройте часовой пояс на всех устройствах в соответствии с их географическим расположением.
11. Настройте правила firewall так, чтобы устройства в сетях DMZ-* не могли инициировать соединения к клиентам в приватных сетях организации, при этом входящие соединения из всех локальных сетей в сети DMZ-* должны быть разрешены и машины в сети DMZ-* должны иметь доступ в интернет. При необходимости, допускается возможность штучно открывать дополнительные порты, необходимые для выполнения задания.
12. Настройте сетевое обнаружение по протоколу LLDP на всех сетевых устройствах и серверах.
13. Настроить удаленный доступ к VDS и R0-MSK по SSH
13.1. Устройство PC-MSK при входе под пользователем user должно иметь доступ к VDS под пользователем user c использованием SSH ключей, без необходимости ввода пароля.
13.2. Подключение к VDS с PC-MSK должно осуществляться по имени “VDS”
14. Настройте защищенный VPN-туннель FW-AMS<=>FW-MSK со следующими параметрами:
14.1. Технология VPN на ваш выбор: IPsec, OpenVPN, WireGuard.
14.2. Используйте современные надежные протоколы шифрования AES и SHA-2
14.3. Не допускается использование протоколов шифрования и аутентификации с длиной ключа/хеша менее 256 бит.
14.4. Настройте маршрутизацию, NAT и межсетевой экран таким образом, чтобы трафик для другого офиса не натировался и не блокировался
15. Настройте работу OSPF между FW*, чтобы устройства из московского офиса имели связанность с устройствами из амстердамского. 
16. Обеспечьте подключение клиента VPNClient к серверу VPN на FW-MSK.
16.1. Технология VPN на ваш выбор: IPsec, OpenVPN, WireGuard.
16.2. Клиент должен иметь доступ к серверам в сети SRV-MSK
16.3. Соединение должно автоматически устанавливаться при включении компьютера или входе под пользователем user.
17. Настройте централизованный сбор журналов syslog на SRV1-MSK. 
17.1. Журналы должны храниться в файлах /opt/logs/[hostname], где hostname - это короткое или полное доменное имя машины, предоставившей соответствующие сообщения.
17.2. PC-MSK должен записывать сообщения error и более важные.
17.3. SRV*-MSK должны записывать сообщения warning и более важные. 
17.4. FW должен записывать сообщения от служб ospf и имеющихся на устройстве служб туннелирования (ipsec, openvpn, wireguard и т.д) уровня не менее notice.


Таблица Адресации

| **Сеть ** | **Устройство ** | **Адрес/Маска ** | **Шлюз**                  |
|:---------:|:---------------:|:----------------:|:-------------------------:|
| INTERNET  | ClientEU        | 100.70.2.45/27   | ISP – первый адрес в сети |
|           | FW-AMS          | 100.70.3.45/26   | ISP – первый адрес в сети |
|           | FW-MSK          | 100.70.4.18/28   | ISP – первый адрес в сети |
|           | ClientSPB       | 100.70.5.55/28   | ISP – первый адрес в сети |
|           | VDS (EKB)       | 100.70.6.12/29   | ISP – первый адрес в сети |
|           | VPNClient (EKB) | 100.70.6.13/29   | ISP – первый адрес в сети |
|           | DNS-сервер      | 100.100.100.100  |                           |
|           | NTP-сервер      | 100.101.102.103  |                           |
| FW–R0–MSK | FW-MSK          | STATIC           |                           |
|           | R0-MSK          | STATIC           | FW-MSK (OSPF)             |
| LAN–MSK   | R0–MSK          | STATIC           |                           |
|           | PC–MSK          | DHCP             | R0–MSK                    |
| SRV–MSK   | R0–MSK          | STATIC           |                           |
|           | SRV1–MSK        | STATIC           | R0–MSK                    |
|           | SRV2–MSK        | STATIC           | R0–MSK                    |
| DMZ–MSK   | FW–MSK          | STATIC           |                           |
|           | APP–MSK         | STATIC           | FW–MSK                    |
| LAN–AMS   | FW–AMS          | STATIC           |                           |
|           | PC–AMS          | DHCP             | FW–AMS                    |
| DMZ–AMS   | FW–AMS          | STATIC           |                           |
|           | DMZ–AMS         | STATIC           | FW–AMS                    |
|           | APP–AMS         | STATIC           | FW–AMS                    |

Топология

<img width="476" alt="Снимок экрана 2023-03-10 в 15 44 06" src="https://user-images.githubusercontent.com/66735783/224319254-b75195be-4f46-4093-ab06-68ef59efa2ae.png">


### Модуль Б.  (Развертывание и сопровождение сетевой инфраструктуры)

ЗАДАНИЕ
1.	В связи с большим спросом на наши услуги на Дальнем востоке, для обеспечения качественного соединения и разумного уровня задержек по передачи данных, руководство приняло решение открыть новый филиал в Сибири. Создайте необходимую инфраструктуру для нового филиала в Иркутске.
1.1.	Разверните необходимые машины из шаблонов и назначьте им параметры, указанные в таблице “Характеристики виртуальных машин в Иркутском филиале”
1.2.	Создайте виртуальные сети и соедините устройства согласно топологии
1.3.	Настройте IPv4-адресацию на устройствах в иркутском филиале и ClientVV и обеспечьте выход в интернет.
1.4.	Настройте сервер разрешения имен
1.5.	Устройства в локальных сетях должны обращаться с DNS запросами к своим FW–IKT. 
1.6.	FW–IKT должны выполнять пересылку DNS запросов
1.7.	Настройте для всех новых устройств соответствующие им имена и доменное имя ikt.jun39.wsr. 
1.8.	Настройте синхронизацию времени аналогично другим филиалам
2.	Настройте защищенные VPN-туннели FW-IKT<=>FW-MSK со следующими параметрами:
2.1.	Технология VPN на ваш выбор: IPsec, OpenVPN, WireGuard.
2.2.	Используйте современные надежные протоколы шифрования AES и SHA-2
2.3.	Не допускается использование протоколов шифрования и аутентификации с длиной ключа/хеша менее 256 бит.
2.4.	Настройте NAT и межсетевой экран таким образом, чтобы трафик для другого офиса не натировался и не блокировался.
2.5.	Настройка тоннеля не должна помешать функционированию тоннеля между AMS и MSK.
3.	Настройте работу OSPF, чтобы устройства из иркутского филиала имели связанность с устройствами из московского и амстердамского. 
4.	Настройте инфраструктуру DNS, чтобы устройства из иркутского филиала имели могли обратиться к устройствам других филиалов по доменным именам. 
5.	Создайте пользователя admin с паролем P@ssw0rd на SRV1–IKT, и добавьте в группу sudo.
6.	Настройте общий доступ к файлам на SRV1–IKT по протоколу NFS.
6.1.	Каталог для хранения файлов /opt/nfs/rw должен быть доступен для чтения и записи.
6.2.	Каталог для хранения файлов /opt/nfs/ro должен быть доступен только для чтения.
6.3.	NFS должен быть доступен для клиентов в сети LAN-IKT.
7.	 Настройте клиент NFS на PC–IKT.
7.1.	Путь /opt/nfs/rw на SRV1–IKT должен быть смонтирован в каталог /home/user/Desktop/nfs_rw на PC–IKT.
7.2.	Путь /opt/nfs/ro на SRV1–IKTAMS должен быть смонтирован в каталог /home/user/Desktop/nfs_ro на PC–IKT.
7.3.	Монтирование должно восстанавливаться при перезагрузке виртуальной машины.
8.	 Настройте права доступа для каталога /opt/nfs/ на SRV1–IKT.
8.1.	Пользователь admin должен иметь права на чтение и запись в каталог /opt/nfs и все его подкаталоги.
9.	На каждом из серверов APP-* должен быть развернут WEB-сервер.
9.1.	Сайт должен открываться по адресу web.jun39.wsr по протоколу HTTP на стандартном порте и должен быть доступен из сети интернет.
9.2.	Сайт должен содержать следующий текст: “Welcome to Minecraft server mc.jun39.wsr site in XX region”, где XX заменено на “European”, “Central”, “Siberian” соответственно региональному расположению.
10.	На сервере VDS разверните сервер DNS
10.1.	Сервер должен расшифровывать зону jun39.wsr
10.2.	Имя jun39.wsr для клиентов в сети интернет должно расшифровываться в адрес сервера VDS.
10.3.	Имя web.jun39.wsr для для клиентов в сети интернет должно расшифровываться во внешний адрес FW-* в ближайшем к клиенту регионе.
10.4.	Не забудьте проконтролировать, что клиенты Client* обращаются с DNS-запросами к VDS.
11.	Внутри филиалов имя web.jun39.wsr должно расшифровываться и в локальный адрес APP-* в соответствующем регионе и по нему должен открываться соответствующий сайт
12.	Настройте CA на SRV2-MSK со следующими параметрами
12.1.	Используйте /opt/ca в качестве корневой директории CA.
12.2.	Страна RU;
12.3.	Организация WSR
12.4.	CN должен быть установлен как WSR CA.
12.5.	Создайте корневой сертификат CA.
12.6.	SRV2-MSK и PC-MSK должны доверять CA.
13.	На сервере SRV1-MSK должен быть развернут WEB-сервер:
13.1.	Сайт должен открываться по адресу corp.msk.jun39.wsr
13.2.	Сайт должен содержать следующий текст “Welcome to secure corporate portal jun39.wsr”
13.3.	Сайт должен функционировать по протоколу HTTPS. При обращении по протоколу HTTP должен происходить автоматический редирект на HTTPS.
13.4.	WEB-сервер должен иметь сертификат, подписанный корпоративным центром сертификации
13.5.	Сайт должен открываться с PC1-MSK без ошибок и предупреждений
14.	Обеспечьте подключение удаленного сотрудника с компьютера VPNclient к корпоративному порталу https://corp.msk.jun39.wsr посредством VPN-подключения. При этом открытие портала не должно вызывать ошибок и предупреждений безопасности. 
15.	На VDS разверните сервер Minecraft. Для этого непосредственно перед началом развертывания сервера выделите виртуальной машине побольше ресурсов, а именно 4 VCPU и 3 Gb оперативной памяти. После этого, разверните сервер Minecraft со следующими параметрами:
15.1.	Имя сервера: Jun39
15.2.	Ограничение кол-ва игроков: 12
15.3.	Порт: по умолчанию
15.4.	Проверка аккаунтов пользователей: отключена
15.5.	Сервер должен быть запущен в виде контейнера Docker
15.6.	Контейнер должен автоматически запускаться после перезагрузки компьютера
15.7.	Для проверки можете использовать tlauncher расположенный на вашем операторском рабочем месте. Подключение осуществляется по внешнему адресу ISP (в сети 172.16.0.0), можно получить в интерфейсе среды виртуализации.
16.	На сервере DMZ-AMS разверните сервер облачного хранения данных. Для этого непосредственно перед началом развертывания сервера выделите виртуальной машине побольше ресурсов, а именно 2 VCPU и 2 Gb оперативной памяти. После этого, разверните сервер со следующими параметрами:
16.1.	Файловый сервер: NextCloud
16.2.	База данных: MariaDB
16.3.	Веб интерфейс БД: phpMyAdmin
16.4.	Порт NextCloud: 8080
16.5.	Порт phpMyAdmin: 8888
16.6.	Все сервисы должны быть запущены в виде контейнеров Docker
16.7.	Все контейнеры должны автоматически запускаться после перезагрузки компьютера
17.	Обеспечьте подключение удаленного сотрудника с компьютера VPNclient к корпоративному облачному хранилищу на DMZ-AMS посредством имеющегося VPN-подключения. 

Таблица Адресации

| **Сеть ** | **Устройство ** | **Адрес/Маска ** | **Шлюз**                  |
|:---------:|:---------------:|:----------------:|:-------------------------:|
| INTERNET  | ClientEU        | 100.70.2.45/27   | ISP – первый адрес в сети |
|           | FW-AMS          | 100.70.3.45/26   | ISP – первый адрес в сети |
|           | FW-MSK          | 100.70.4.18/28   | ISP – первый адрес в сети |
|           | ClientSPB       | 100.70.5.55/28   | ISP – первый адрес в сети |
|           | VDS (EKB)       | 100.70.6.12/29   | ISP – первый адрес в сети |
|           | VPNClient(EKB)  | 100.70.6.13/29   | ISP – первый адрес в сети |
|           | FW-IKT          | 100.70.7.99/25   | ISP – первый адрес в сети |
|           | ClientVV        | 100.70.8.78/28   | ISP – первый адрес в сети |
|           | DNS-сервер      | 100.100.100.100  |                           |
|           | NTP-сервер      | 100.101.102.103  |                           |
| FW–R0–MSK | FW-MSK          | STATIC           |                           |
|           | R0-MSK          | STATIC           | FW-MSK (OSPF)             |
| LAN–MSK   | R0–MSK          | STATIC           |                           |
|           | PC–MSK          | DHCP             | R0–MSK                    |
| SRV–MSK   | R0–MSK          | STATIC           |                           |
|           | SRV1–MSK        | STATIC           | R0–MSK                    |
|           | SRV2–MSK        | STATIC           | R0–MSK                    |
| DMZ–MSK   | FW–MSK          | STATIC           |                           |
|           | APP–MSK         | STATIC           | FW–MSK                    |
| LAN–AMS   | FW–AMS          | STATIC           |                           |
|           | PC–AMS          | DHCP             | FW–AMS                    |
| DMZ–AMS   | FW–AMS          | STATIC           |                           |
|           | DMZ–AMS         | STATIC           | FW–AMS                    |
|           | APP–AMS         | STATIC           | FW–AMS                    |
| LAN–IKT   | FW–IKT          | STATIC           |                           |
|           | PC–IKT          | DHCP             | FW–IKT                    |
|           | SRV1–IKT        | STATIC           | FW–IKT                    |
| DMZ–IKT   | FW–IKT          | STATIC           |                           |
|           | APP–IKT         | STATIC           | FW–IKT                    |


Топология
<img width="338" alt="Снимок экрана 2023-03-10 в 15 44 50" src="https://user-images.githubusercontent.com/66735783/224319470-d5da68e1-0dad-497b-9df4-1f5d0b09a2a6.png">

