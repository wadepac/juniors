


# КОНКУРСНОЕ ЗАДАНИЕ КОМПЕТЕНЦИИ
## «СЕТЕВОЕ И СИСТЕМНОЕ АДМИНИСТРИРОВАНИЕ»



## Структура модулей конкурсного задания (инвариант)

В случае, если в тексте задания не указано иное, все пользовательские учетные записи должны иметь пароль P@ssw0rd. 
На маршрутизаторе R0 логин/пароль по умолчанию - vyos/toor 
На межсетевых экранах FW* логин/пароль по умолчанию - root/toor 
На компьютерах с Debian 10/11 логин/пароль по умолчанию - user/P@ssw0rd и root/toor
Все проверки работы клиентских технологий (сайтов, клиентских VPN подключений и т.п.) будут выполняться из под пользователя user соответствующих клиентских машин. Сайты будут проверяться через стандартный браузер клиентской ОС (для Windows - Edge, для Linux - Firefox).
При выполнении настоящего задания всегда нужно руководствоваться правилом наименьших привилегий. 
Консольный доступ к виртуальной машине провайдера ISP для участника не предполагается. Следите за тем, чтобы виртуальная машина ISP была включена в течение всего времени выполнения задания.

### Модуль Б.  (Развертывание и сопровождение сетевой инфраструктуры)

Топология

<img width="500" alt="Снимок экрана 2023-03-10 в 15 44 50" src="https://user-images.githubusercontent.com/66735783/224319470-d5da68e1-0dad-497b-9df4-1f5d0b09a2a6.png">

ЗАДАНИЕ
1.	В связи с большим спросом на наши услуги на Дальнем востоке, для обеспечения качественного соединения и разумного уровня задержек по передачи данных, руководство приняло решение открыть новый филиал в Сибири. Создайте необходимую инфраструктуру для нового филиала в Иркутске.
   - 1.	Разверните необходимые машины из шаблонов и назначьте им параметры, указанные в таблице “Характеристики виртуальных машин в Иркутском филиале”
   - 2.	Создайте виртуальные сети и соедините устройства согласно топологии
   - 3.	Настройте IPv4-адресацию на устройствах в иркутском филиале и ClientVV и обеспечьте выход в интернет.
   - 4.	Настройте сервер разрешения имен
   - 5.	Устройства в локальных сетях должны обращаться с DNS запросами к своим FW–IKT. 
   - 6.	FW–IKT должны выполнять пересылку DNS запросов
   - 7.	Настройте для всех новых устройств соответствующие им имена и доменное имя ikt.jun39.wsr. 
   - 8.	Настройте синхронизацию времени аналогично другим филиалам
2.	[Настройте защищенные VPN-туннели FW-IKT<=>FW-MSK со следующими параметрами:](../../OperatingSystems/VPN/)
   - 1.	Технология VPN на ваш выбор: IPsec, OpenVPN, WireGuard.
   - 2.	Используйте современные надежные протоколы шифрования AES и SHA-2
   - 3.	Не допускается использование протоколов шифрования и аутентификации с длиной ключа/хеша менее 256 бит.
   - 4.	Настройте NAT и межсетевой экран таким образом, чтобы трафик для другого офиса не натировался и не блокировался.
   - 5.	Настройка тоннеля не должна помешать функционированию тоннеля между AMS и MSK.
3.	Настройте работу OSPF, чтобы устройства из иркутского филиала имели связанность с устройствами из московского и амстердамского. 
4.	[Настройте инфраструктуру DNS, чтобы устройства из иркутского филиала имели могли обратиться к устройствам других филиалов по доменным именам.](../../OperatingSystems/DNS/README.md) 
5.	[Создайте пользователя admin с паролем P@ssw0rd на SRV1–IKT, и добавьте в группу sudo.](../../OperatingSystems/Users/README.md)
6.	[Настройте общий доступ к файлам на SRV1–IKT по протоколу NFS.](../../OperatingSystems/Storage/NFS/README.md)
   - 1.	Каталог для хранения файлов /opt/nfs/rw должен быть доступен для чтения и записи.
   - 2.	Каталог для хранения файлов /opt/nfs/ro должен быть доступен только для чтения.
   - 3.	NFS должен быть доступен для клиентов в сети LAN-IKT.
7.	 [Настройте клиент NFS на PC–IKT.](../../OperatingSystems/Storage/NFS/README.md)
   - 1.	Путь /opt/nfs/rw на SRV1–IKT должен быть смонтирован в каталог /home/user/Desktop/nfs_rw на PC–IKT.
   - 2.	Путь /opt/nfs/ro на SRV1–IKTAMS должен быть смонтирован в каталог /home/user/Desktop/nfs_ro на PC–IKT.
   - 3.	Монтирование должно восстанавливаться при перезагрузке виртуальной машины.
8.	 Настройте права доступа для каталога /opt/nfs/ на SRV1–IKT.
   - 1.	Пользователь admin должен иметь права на чтение и запись в каталог /opt/nfs и все его подкаталоги.
9.	[На каждом из серверов APP-* должен быть развернут WEB-сервер.](../../OperatingSystems/WEB/NGINX/README.md)
   - 1.	Сайт должен открываться по адресу web.jun39.wsr по протоколу HTTP на стандартном порте и должен быть доступен из сети интернет.
   - 2.	Сайт должен содержать следующий текст: “Welcome to Minecraft server mc.jun39.wsr site in XX region”, где XX заменено на “European”, “Central”, “Siberian” соответственно региональному расположению.
10.	[На сервере VDS разверните сервер DNS](../../OperatingSystems/DNS/README.md)
   - 1.	Сервер должен расшифровывать зону jun39.wsr
   - 2.	Имя jun39.wsr для клиентов в сети интернет должно расшифровываться в адрес сервера VDS.
   - 3.	Имя web.jun39.wsr для для клиентов в сети интернет должно расшифровываться во внешний адрес FW-* в ближайшем к клиенту регионе.
   - 4.	Не забудьте проконтролировать, что клиенты Client* обращаются с DNS-запросами к VDS.
11.	Внутри филиалов имя web.jun39.wsr должно расшифровываться и в локальный адрес APP-* в соответствующем регионе и по нему должен открываться соответствующий сайт
12.	Настройте CA на SRV2-MSK со следующими параметрами
   - 1.	Используйте /opt/ca в качестве корневой директории CA.
   - 2.	Страна RU;
   - 3.	Организация WSR
   - 4.	CN должен быть установлен как WSR CA.
   - 5.	Создайте корневой сертификат CA.
   - 6.	SRV2-MSK и PC-MSK должны доверять CA.
13.	[На сервере SRV1-MSK должен быть развернут WEB-сервер:](../../OperatingSystems/WEB/NGINX/README.md)
   - 1.	Сайт должен открываться по адресу corp.msk.jun39.wsr
   - 2.	Сайт должен содержать следующий текст “Welcome to secure corporate portal jun39.wsr”
   - 3.	Сайт должен функционировать по протоколу HTTPS. При обращении по протоколу HTTP должен происходить автоматический редирект на HTTPS.
   - 4.	WEB-сервер должен иметь сертификат, подписанный корпоративным центром сертификации
   - 5.	Сайт должен открываться с PC1-MSK без ошибок и предупреждений
14.	Обеспечьте подключение удаленного сотрудника с компьютера VPNclient к корпоративному порталу https://corp.msk.jun39.wsr посредством VPN-подключения. При этом открытие портала не должно вызывать ошибок и предупреждений безопасности. 
15.	[На VDS разверните сервер Minecraft. Для этого непосредственно перед началом развертывания сервера выделите виртуальной машине побольше ресурсов, а именно 4 VCPU и 3 Gb оперативной памяти. После этого, разверните сервер Minecraft со следующими параметрами:](../../Addons/MinecraftServer/README.md)
   - 1.	Имя сервера: Jun39
   - 2.	Ограничение кол-ва игроков: 12
   - 3.	Порт: по умолчанию
   - 4.	Проверка аккаунтов пользователей: отключена
   - 5.	Сервер должен быть запущен в виде контейнера Docker
   - 6.	Контейнер должен автоматически запускаться после перезагрузки компьютера
   - 7.	Для проверки можете использовать tlauncher расположенный на вашем операторском рабочем месте. Подключение осуществляется по внешнему адресу ISP (в сети 172.16.0.0), можно получить в интерфейсе среды виртуализации.
16.	[На сервере DMZ-AMS разверните сервер облачного хранения данных. Для этого непосредственно перед началом развертывания сервера выделите виртуальной машине побольше ресурсов, а именно 2 VCPU и 2 Gb оперативной памяти. После этого, разверните сервер со следующими параметрами:](../../Addons/NextCloud/README.md)
   - 1.	Файловый сервер: NextCloud
   - 2.	База данных: MariaDB
   - 3.	Веб интерфейс БД: phpMyAdmin
   - 4.	Порт NextCloud: 8080
   - 5.	Порт phpMyAdmin: 8888
   - 6.	Все сервисы должны быть запущены в виде контейнеров Docker
   - 7.	Все контейнеры должны автоматически запускаться после перезагрузки компьютера
17.	[Обеспечьте подключение удаленного сотрудника с компьютера VPNclient к корпоративному облачному хранилищу на DMZ-AMS посредством имеющегося VPN-подключения.](../../OperatingSystems/VPN/)

Таблица Адресации

| **Сеть ** | **Устройство ** | **Адрес/Маска ** | **Шлюз**                  |
|:---------:|:---------------:|:----------------:|:-------------------------:|
| INTERNET  | ClientEU        | 100.70.2.45/27   | ISP – первый адрес в сети |
|           | FW-AMS          | 100.70.3.45/26   | ISP – первый адрес в сети |
|           | FW-MSK          | 100.70.4.18/28   | ISP – первый адрес в сети |
|           | ClientSPB       | 100.70.5.55/28   | ISP – первый адрес в сети |
|           | VDS (EKB)       | 100.70.6.12/29   | ISP – первый адрес в сети |
|           | VPNClient(EKB)  | 100.70.6.13/29   | ISP – первый адрес в сети |
|           | FW-IKT          | 100.70.7.99/25   | ISP – первый адрес в сети |
|           | ClientVV        | 100.70.8.78/28   | ISP – первый адрес в сети |
|           | DNS-сервер      | 100.100.100.100  |                           |
|           | NTP-сервер      | 100.101.102.103  |                           |
| FW–R0–MSK | FW-MSK          | STATIC           |                           |
|           | R0-MSK          | STATIC           | FW-MSK (OSPF)             |
| LAN–MSK   | R0–MSK          | STATIC           |                           |
|           | PC–MSK          | DHCP             | R0–MSK                    |
| SRV–MSK   | R0–MSK          | STATIC           |                           |
|           | SRV1–MSK        | STATIC           | R0–MSK                    |
|           | SRV2–MSK        | STATIC           | R0–MSK                    |
| DMZ–MSK   | FW–MSK          | STATIC           |                           |
|           | APP–MSK         | STATIC           | FW–MSK                    |
| LAN–AMS   | FW–AMS          | STATIC           |                           |
|           | PC–AMS          | DHCP             | FW–AMS                    |
| DMZ–AMS   | FW–AMS          | STATIC           |                           |
|           | DMZ–AMS         | STATIC           | FW–AMS                    |
|           | APP–AMS         | STATIC           | FW–AMS                    |
| LAN–IKT   | FW–IKT          | STATIC           |                           |
|           | PC–IKT          | DHCP             | FW–IKT                    |
|           | SRV1–IKT        | STATIC           | FW–IKT                    |
| DMZ–IKT   | FW–IKT          | STATIC           |                           |
|           | APP–IKT         | STATIC           | FW–IKT                    |


